import{c as e,C as t,a as o,u as r,b as n,d as a,e as s,f as l,G as c,M as i,V as m,g as u,W as f,F as d,h,E as g,R as p,S as v,i as E,j as y}from"./vendor.26adb6e8.js";!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(o){const r=new URL(e,location),n=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((o,a)=>{const s=new URL(e,r);if(self[t].moduleMap[s])return o(self[t].moduleMap[s]);const l=new Blob([`import * as m from '${s}';`,`${t}.moduleMap['${s}']=m;`],{type:"text/javascript"}),c=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(l),onerror(){a(new Error(`Failed to import: ${e}`)),n(c)},onload(){o(self[t].moduleMap[s]),n(c)}});document.head.appendChild(c)})),self[t].moduleMap={}}}("assets/");const x=e((e=>({beat:0,energy:0,changeEnergy:t.debounce((()=>e((e=>({energy:(e.energy+1)%3})))),50),nextBeat:()=>e((e=>({beat:e.beat+1})))})));function w(e){return e[x((e=>e.energy))]}function S(e,t){const[r,n]=o.useState(Boolean(t));o.useEffect((()=>{if(!r)return;const e=setTimeout((()=>n(!1)),t);return()=>clearTimeout(e)}),[t,r]),o.useEffect((()=>{if(!r)return x.subscribe((t=>e(t.beat,t.energy)))}),[r,e])}const M=[[{color1:"hsl(216,90%,63%)",color2:"hsl(216,90%,83%)"},{color1:"hsl(152,80%,63%)",color2:"hsl(152,80%,83%)"},{color1:"hsl(305,80%,63%)",color2:"hsl(305,80%,83%)"}],[{color1:"hsl(310,40%,38%)",color2:"hsl(310,40%,50%)"},{color1:"hsl(22,40%,38%)",color2:"hsl(22,40%,50%)"},{color1:"hsl(68,40%,38%)",color2:"hsl(68,40%,50%)"}],[{color1:"hsl(10,90%,38%)",color2:"hsl(10,90%,50%)"},{color1:"hsl(115,90%,38%)",color2:"hsl(115,90%,50%)"},{color1:"hsl(248,90%,38%)",color2:"hsl(248,90%,50%)"}]];function b(){const[{position:e}]=r((()=>({from:{position:[0,0,-20]},config:s.molasses}))),[{color1:t,color2:l},c]=r((()=>({from:{color1:"#000",color2:"#222"},to:{color1:"#444",color2:"#ccc"},config:{duration:3e3}})));n((({mouse:t})=>{const o=Math.sqrt(t.x*t.x+t.y*t.y);e.start({to:[-10*t.x,-5*t.y,-30*o-10]})})),S(((e,t)=>{c.start({to:M[t][e%3],config:0===t?s.molasses:s.default})}),5e3);const i=o.createElement("sphereBufferGeometry",{args:[6,32,32]});return o.createElement(a.group,{position:e},o.createElement("mesh",{layers:[0],scale:[.98,.98,.98]},i,o.createElement(a.meshBasicMaterial,{transparent:!0,opacity:.5,color:t})),o.createElement("mesh",{layers:[1]},i,o.createElement(a.meshBasicMaterial,{color:l})))}function C(e){return e instanceof i}function D(e){return[Math.random()*e-e/2,Math.random()*e-e/2,Math.random()*e-e/2]}function P({position:e,scale:t,color:n="#f0b",onClick:i}){const m=l(c,"./assets/flower.e70855f9.glb"),[u,f]=o.useState(!1),[{rotation:d,position:h}]=r((()=>({from:{rotation:D(10),position:[0,9,0]},to:{rotation:D(.2),position:e},delay:1e3,config:s.molasses}))),[{scale:g,emissive:p}]=r((()=>({from:{scale:t,emissive:0},to:{scale:t,emissive:0},config:s.gentle})));S((()=>{d.start({to:D(.3),config:{mass:200,tension:100,friction:100}})}),3e3),o.useEffect((()=>{u?(g.start({to:1.2*t}),p.start({to:5})):(g.start({to:t}),p.start({to:0}))}),[u,p,g,t]);const v=Object.values(m.nodes).filter(C);return v.forEach((e=>e.geometry.computeVertexNormals())),o.createElement(a.group,{rotation:d,position:h,scale:g,onPointerEnter:()=>f(!0),onPointerLeave:()=>f(!1),onClick:i},o.createElement("group",{rotation:[1.3,0,.2],scale:.05,position:[-2,0,-1]},v.map(((e,t)=>o.createElement("mesh",{key:t,geometry:e.geometry,rotation:e.rotation,position:e.position,scale:e.scale,layers:[0],receiveShadow:!0,castShadow:!0},o.createElement(a.meshStandardMaterial,{color:n,emissive:"#662",emissiveIntensity:p}))))))}function U(){const e=w(["#422","#864","#aa8"]),t=x((e=>e.changeEnergy));return o.createElement(o.Fragment,null,o.createElement(P,{position:[1,.4,-.2],scale:1}),o.createElement(P,{position:[-1.2,.8,0],scale:1.2}),o.createElement(P,{position:[2.7,2.2,.3],scale:.7,onClick:t,color:e}))}function A(){const e=l(c,"./assets/deerhead.ff9ec202.glb").nodes.mesh_0,[{rotation:t}]=r((()=>({from:{rotation:[0,0,0]},config:s.slow})));return n((e=>{t.start({to:[-.2*e.mouse.y,.3*e.mouse.x,0]})})),o.createElement(a.group,{rotation:t},o.createElement("group",{rotation:[-1.8,0,-1.6],position:[0,-7,0]},o.createElement("mesh",{geometry:e.geometry,layers:[0],receiveShadow:!0,castShadow:!0},o.createElement("meshStandardMaterial",{color:"#555",roughness:1,metalness:.5})),o.createElement("mesh",{geometry:e.geometry,layers:[1],receiveShadow:!0,castShadow:!0},o.createElement("meshBasicMaterial",{color:"#000"}))),o.createElement(U,null))}const L={uniforms:{tDiffuse:{value:null},tAdd:{value:null}},vertexShader:"\n    varying vec2 vUv;\n    void main() {\n      vUv = uv;\n      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n    }",fragmentShader:"\n    uniform sampler2D tDiffuse;\n    uniform sampler2D tAdd;\n    varying vec2 vUv;\n    void main() {\n      vec4 color = texture2D( tDiffuse, vUv );\n      vec4 add = texture2D( tAdd, vUv );\n      gl_FragColor = color + add;\n    }"},_={uniforms:{tDiffuse:{value:null},lightPosition:{value:new m(.5,.75)},exposure:{value:.18},decay:{value:.95},density:{value:.75},weight:{value:.4},samples:{value:50}},vertexShader:"\n    varying vec2 vUv;\n    void main() {\n      vUv = uv;\n      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n    }",fragmentShader:"\n    varying vec2 vUv;\n    uniform sampler2D tDiffuse;\n    uniform vec2 lightPosition;\n    uniform float exposure;\n    uniform float decay;\n    uniform float density;\n    uniform float weight;\n    uniform int samples;\n    const int MAX_SAMPLES = 100;\n    void main()\n    {\n      vec2 texCoord = vUv;\n      vec2 deltaTextCoord = texCoord - lightPosition;\n      deltaTextCoord *= 1.0 / float(samples) * density;\n      vec4 color = texture2D(tDiffuse, texCoord);\n      float illuminationDecay = 1.0;\n      for(int i=0; i < MAX_SAMPLES; i++) {\n        if(i == samples) break;\n        texCoord -= deltaTextCoord;\n        vec4 tex = texture2D(tDiffuse, texCoord);\n        tex *= illuminationDecay * weight;\n        color += tex;\n        illuminationDecay *= decay;\n      }\n      gl_FragColor = color * exposure;\n    }"};function R(){const{gl:e,scene:t,camera:r,size:a}=u(),s=o.useMemo((()=>new f(0,0)),[]),l=o.useRef(null),c=o.useRef(null);return o.useEffect((()=>{l.current.setSize(a.width,a.height),c.current.setSize(a.width,a.height)}),[a]),n((()=>{r.layers.set(1),l.current.render(),r.layers.set(0),c.current.render()}),1),o.createElement(o.Fragment,null,o.createElement("effectComposer",{ref:l,args:[e,s],renderToScreen:!1},o.createElement("renderPass",{attachArray:"passes",args:[t,r]}),o.createElement("shaderPass",{attachArray:"passes",args:[_],needsSwap:!1})),o.createElement("effectComposer",{ref:c,args:[e]},o.createElement("renderPass",{attachArray:"passes",args:[t,r]}),o.createElement("shaderPass",{attachArray:"passes",args:[L],"uniforms-tAdd-value":s.texture}),o.createElement("shaderPass",{attachArray:"passes",args:[d],"uniforms-resolution-value":[1/a.width,1/a.height],renderToScreen:!0})))}h({EffectComposer:g,RenderPass:p,ShaderPass:v});const j=["hsl(310,80%,50%)","hsl(22,80%,50%)","hsl(68,80%,50%)","hsl(248,90%,70%)","hsl(10,90%,50%)","hsl(115,90%,50%)"];function B(){return j[Math.floor(6*Math.random())]}function k(){const[{color1:e,color2:t,color3:n},l]=r((()=>({from:{color1:"#888",color2:"#888",color3:"#888"},to:{color1:"#fff",color2:"#fff",color3:"#fff"},config:{duration:3e3}})));return S(((e,t)=>{t<2?l.start({to:{color1:"#fff",color2:"#fff",color3:"#fff"},config:s.slow}):l.start({to:{color1:B(),color2:B(),color3:B()},config:s.default})})),o.createElement(o.Fragment,null,o.createElement("ambientLight",{intensity:.5}),o.createElement(a.pointLight,{position:[0,60,-100],intensity:20,color:e}),o.createElement(a.pointLight,{position:[-50,0,-50],intensity:2,color:t}),o.createElement(a.spotLight,{castShadow:!0,intensity:8,angle:.31,position:[10,10,10],"shadow-mapSize-width":2048,"shadow-mapSize-height":2048,color:n}))}function F(){!function(){const e=x((e=>e.nextBeat)),t=w([3200,1600,800]);o.useEffect((()=>{const o=setInterval(e,t);return()=>clearInterval(o)}),[t,e])}();const e=w(["#223441","#212122","#161118"]);return o.createElement(E,{shadows:!0,style:{background:e},camera:{position:[0,0,12],fov:50},gl:{antialias:!0}},o.createElement(k,null),o.createElement(b,null),o.createElement(o.Suspense,{fallback:null},o.createElement(A,null)),o.createElement(R,null))}y.render(o.createElement(o.StrictMode,null,o.createElement(F,null)),document.getElementById("root"));
