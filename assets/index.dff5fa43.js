import{c as e,C as t,u as o,a as r,b as n,d as a,e as s,G as l,M as c,V as i,f as m,W as u,F as f,g as d,E as h,R as g,S as p,h as v,i as E}from"./vendor.21c3502a.js";!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(o){const r=new URL(e,location),n=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((o,a)=>{const s=new URL(e,r);if(self[t].moduleMap[s])return o(self[t].moduleMap[s]);const l=new Blob([`import * as m from '${s}';`,`${t}.moduleMap['${s}']=m;`],{type:"text/javascript"}),c=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(l),onerror(){a(new Error(`Failed to import: ${e}`)),n(c)},onload(){o(self[t].moduleMap[s]),n(c)}});document.head.appendChild(c)})),self[t].moduleMap={}}}("assets/");const y=e((e=>({beat:0,level:0,setLevel:t=>e((e=>({level:t}))),nextBeat:()=>e((e=>({beat:e.beat+1})))})));function S(e){return e[y((e=>e.level))]}function w(e,o){const[r,n]=t.useState(Boolean(o));t.useEffect((()=>{if(!r)return;const e=setTimeout((()=>n(!1)),o);return()=>clearTimeout(e)}),[o,r]),t.useEffect((()=>{if(!r)return y.subscribe((t=>e(t.beat,t.level)))}),[r,e])}const x=[[{color1:"hsl(216,90%,63%)",color2:"hsl(216,90%,83%)"},{color1:"hsl(152,80%,63%)",color2:"hsl(152,80%,83%)"},{color1:"hsl(305,80%,63%)",color2:"hsl(305,80%,83%)"}],[{color1:"hsl(310,40%,38%)",color2:"hsl(310,40%,50%)"},{color1:"hsl(22,40%,38%)",color2:"hsl(22,40%,50%)"},{color1:"hsl(68,40%,38%)",color2:"hsl(68,40%,50%)"}],[{color1:"hsl(10,90%,38%)",color2:"hsl(10,90%,50%)"},{color1:"hsl(115,90%,38%)",color2:"hsl(115,90%,50%)"},{color1:"hsl(248,90%,38%)",color2:"hsl(248,90%,50%)"}]];function M(){const[{position:e}]=o((()=>({from:{position:[0,0,-20]},config:a.molasses}))),[{color1:s,color2:l},c]=o((()=>({from:{color1:"#000",color2:"#222"},to:{color1:"#444",color2:"#ccc"},config:{duration:3e3}})));r((({mouse:t})=>{const o=Math.sqrt(t.x*t.x+t.y*t.y);e.start({to:[-10*t.x,-5*t.y,-30*o-10]})})),w(((e,t)=>{c.start({to:x[t][e%3],config:0===t?a.molasses:a.default})}),5e3);const i=t.createElement("sphereBufferGeometry",{args:[6,32,32]});return t.createElement(n.group,{position:e},t.createElement("mesh",{layers:[0],scale:[.98,.98,.98]},i,t.createElement(n.meshBasicMaterial,{transparent:!0,opacity:.5,color:s})),t.createElement("mesh",{layers:[1]},i,t.createElement(n.meshBasicMaterial,{color:l})))}function b(e){return e instanceof c}function C(e){return[Math.random()*e-e/2,Math.random()*e-e/2,Math.random()*e-e/2]}function D({position:e,scale:r,color:c,onClick:i,showRing:m}){const u=s(l,"./assets/flower.e70855f9.glb"),[f,d]=t.useState(!1),[{rotation:h,position:g}]=o((()=>({from:{rotation:C(10),position:[0,9,0]},to:{rotation:C(.2),position:e},delay:1e3,config:a.molasses}))),[{scale:p,emissive:v}]=o((()=>({from:{scale:r,emissive:0},to:{scale:r,emissive:0},config:a.gentle}))),[{ringScale:E,ringOpacity:y},S]=o((()=>({from:{ringScale:0,ringOpacity:0}})));w((()=>{h.start({to:C(.3),config:{mass:200,tension:100,friction:100}})}),3e3),t.useEffect((()=>{f?(p.start({to:1.2*r}),v.start({to:5})):(p.start({to:r}),v.start({to:0}))}),[f,v,p,r]),t.useEffect((()=>{m?S.start({loop:{from:{ringScale:1,ringOpacity:1},to:{ringScale:2,ringOpacity:0},delay:0},config:a.molasses,delay:5e3}):S.start({to:{ringScale:0,ringOpacity:0}})}),[m]);const x=Object.values(u.nodes).filter(b);return x.forEach((e=>e.geometry.computeVertexNormals())),t.createElement(t.Fragment,null,t.createElement(n.group,{rotation:h,position:g,scale:p,onPointerEnter:()=>d(!0),onPointerLeave:()=>d(!1),onClick:i},t.createElement("group",{rotation:[1.3,0,.2],scale:.05,position:[-1.3,-1.25,-.5]},x.map(((e,o)=>t.createElement("mesh",{key:o,geometry:e.geometry,rotation:e.rotation,position:e.position,scale:e.scale,layers:[0],receiveShadow:!0,castShadow:!0},t.createElement(n.meshLambertMaterial,{color:c,emissive:"#662",emissiveIntensity:v})))))),t.createElement(n.group,{position:g,scale:E,visible:m},t.createElement("mesh",{layers:[0],scale:r},t.createElement("ringGeometry",{args:[.95,1,20]}),t.createElement(n.lineBasicMaterial,{color:"#88f",opacity:y,transparent:!0}))))}function P(){const[e,o]=t.useState(!1),[r,n]=t.useState(!1),[a,s]=t.useState(!1),l=S(["#9cc","#336","#44a"]),c=S(["#336","#a63","#44a"]),i=S(["#336","#336","#aa8"]),m=y((e=>e.setLevel));return t.createElement(t.Fragment,null,t.createElement(D,{position:[.2,1.6,-.8],scale:1,onClick:()=>{m(0),o(!0)},color:l,showRing:!e}),t.createElement(D,{position:[-2,2,-.6],scale:1.2,onClick:()=>{m(1),n(!0)},color:c,showRing:e&&!r}),t.createElement(D,{position:[1.9,3,-.3],scale:.7,onClick:()=>{m(2),s(!0)},color:i,showRing:e&&r&&!a}))}function L(){const e=s(l,"./assets/deerhead.ff9ec202.glb").nodes.mesh_0,[{rotation:c}]=o((()=>({from:{rotation:[0,0,0]},config:a.slow})));return r((e=>{c.start({to:[-.2*e.mouse.y,.3*e.mouse.x,0]})})),t.createElement(n.group,{rotation:c},t.createElement("group",{rotation:[-1.8,0,-1.6],position:[0,-7,0]},t.createElement("mesh",{geometry:e.geometry,layers:[0],receiveShadow:!0,castShadow:!0},t.createElement("meshStandardMaterial",{color:"#555",roughness:1,metalness:.5})),t.createElement("mesh",{geometry:e.geometry,layers:[1],receiveShadow:!0,castShadow:!0},t.createElement("meshBasicMaterial",{color:"#000"}))),t.createElement(P,null))}const U={uniforms:{tDiffuse:{value:null},tAdd:{value:null}},vertexShader:"\n    varying vec2 vUv;\n    void main() {\n      vUv = uv;\n      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n    }",fragmentShader:"\n    uniform sampler2D tDiffuse;\n    uniform sampler2D tAdd;\n    varying vec2 vUv;\n    void main() {\n      vec4 color = texture2D( tDiffuse, vUv );\n      vec4 add = texture2D( tAdd, vUv );\n      gl_FragColor = color + add;\n    }"},R={uniforms:{tDiffuse:{value:null},lightPosition:{value:new i(.5,.75)},exposure:{value:.18},decay:{value:.95},density:{value:.75},weight:{value:.4},samples:{value:50}},vertexShader:"\n    varying vec2 vUv;\n    void main() {\n      vUv = uv;\n      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n    }",fragmentShader:"\n    varying vec2 vUv;\n    uniform sampler2D tDiffuse;\n    uniform vec2 lightPosition;\n    uniform float exposure;\n    uniform float decay;\n    uniform float density;\n    uniform float weight;\n    uniform int samples;\n    const int MAX_SAMPLES = 100;\n    void main()\n    {\n      vec2 texCoord = vUv;\n      vec2 deltaTextCoord = texCoord - lightPosition;\n      deltaTextCoord *= 1.0 / float(samples) * density;\n      vec4 color = texture2D(tDiffuse, texCoord);\n      float illuminationDecay = 1.0;\n      for(int i=0; i < MAX_SAMPLES; i++) {\n        if(i == samples) break;\n        texCoord -= deltaTextCoord;\n        vec4 tex = texture2D(tDiffuse, texCoord);\n        tex *= illuminationDecay * weight;\n        color += tex;\n        illuminationDecay *= decay;\n      }\n      gl_FragColor = color * exposure;\n    }"};function A(){const{gl:e,scene:o,camera:n,size:a}=m(),s=t.useMemo((()=>new u(0,0)),[]),l=t.useRef(null),c=t.useRef(null);return t.useEffect((()=>{l.current.setSize(a.width,a.height),c.current.setSize(a.width,a.height)}),[a]),r((()=>{n.layers.set(1),l.current.render(),n.layers.set(0),c.current.render()}),1),t.createElement(t.Fragment,null,t.createElement("effectComposer",{ref:l,args:[e,s],renderToScreen:!1},t.createElement("renderPass",{attachArray:"passes",args:[o,n]}),t.createElement("shaderPass",{attachArray:"passes",args:[R],needsSwap:!1})),t.createElement("effectComposer",{ref:c,args:[e]},t.createElement("renderPass",{attachArray:"passes",args:[o,n]}),t.createElement("shaderPass",{attachArray:"passes",args:[U],"uniforms-tAdd-value":s.texture}),t.createElement("shaderPass",{attachArray:"passes",args:[f],"uniforms-resolution-value":[1/a.width,1/a.height],renderToScreen:!0})))}d({EffectComposer:h,RenderPass:g,ShaderPass:p});const _=["hsl(310,80%,50%)","hsl(22,80%,50%)","hsl(68,80%,50%)","hsl(248,90%,70%)","hsl(10,90%,50%)","hsl(115,90%,50%)"];function k(){return _[Math.floor(6*Math.random())]}function B(){const[{color1:e,color2:r,color3:s},l]=o((()=>({from:{color1:"#888",color2:"#888",color3:"#888"},to:{color1:"#fff",color2:"#fff",color3:"#fff"},config:{duration:3e3}})));return w(((e,t)=>{t<2?l.start({to:{color1:"#fff",color2:"#fff",color3:"#fff"},config:a.slow}):l.start({to:{color1:k(),color2:k(),color3:k()},config:a.default})})),t.createElement(t.Fragment,null,t.createElement("ambientLight",{intensity:.5}),t.createElement(n.pointLight,{position:[0,60,-100],intensity:20,color:e}),t.createElement(n.pointLight,{position:[-50,0,-50],intensity:2,color:r}),t.createElement(n.spotLight,{castShadow:!0,intensity:8,angle:.31,position:[10,10,10],"shadow-mapSize-width":2048,"shadow-mapSize-height":2048,color:s}))}function F(){!function(){const e=y((e=>e.nextBeat)),o=S([3200,1600,800]);t.useEffect((()=>{const t=setInterval(e,o);return()=>clearInterval(t)}),[o,e])}();const e=S(["#223441","#212122","#161118"]);return t.createElement(v,{shadows:!0,style:{background:e},camera:{position:[0,0,12],fov:50},gl:{antialias:!0}},t.createElement(B,null),t.createElement(M,null),t.createElement(t.Suspense,{fallback:null},t.createElement(L,null)),t.createElement(A,null))}E.render(t.createElement(t.StrictMode,null,t.createElement(F,null)),document.getElementById("root"));
